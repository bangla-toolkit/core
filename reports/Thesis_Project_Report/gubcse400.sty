\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{gubcse400}[2024/01/01 project/thesis package]

\RequirePackage{microtype}
\RequirePackage{booktabs}
\RequirePackage{mathpazo}
\RequirePackage{textcase}
\RequirePackage{ifthen}
\RequirePackage{amssymb}
\RequirePackage{graphicx}
\RequirePackage{titlesec}
%\RequirePackage{natbib}
\RequirePackage[pages=some,placement=top]{background}

% ============================================
% BANGLA FONT SUPPORT (Conditional)
% ============================================
% Automatically detects XeLaTeX/LuaLaTeX vs pdfLaTeX
% For Bangla text: use XeLaTeX compiler
% ============================================
\RequirePackage{ifxetex}
\RequirePackage{ifluatex}

\newif\ifxetexorluatex
\ifxetex
  \xetexorluatextrue
\else
  \ifluatex
    \xetexorluatextrue
  \else
    \xetexorluatexfalse
  \fi
\fi

\ifxetexorluatex
  % XeLaTeX/LuaLaTeX: Full Bangla support
  \RequirePackage{fontspec}
  \RequirePackage{polyglossia}
  \setmainlanguage{english}
  \setotherlanguage{bengali}
  \newfontfamily\bengalifont[Script=Bengali, Scale=1.0]{Noto Sans Bengali}
  \newcommand{\bn}[1]{{\bengalifont\textbengali{#1}}}
  % Monospace font with Bangla fallback for code listings
  \setmonofont{DejaVu Sans Mono}[Scale=0.9]
  \newfontfamily\codefont{DejaVu Sans Mono}[Scale=0.9]
\else
  % pdfLaTeX fallback: show placeholder for Bangla
  \newcommand{\bn}[1]{\textit{[Bangla]}}
  \newcommand{\codefont}{\ttfamily}
\fi

\def\squarebg{\backgroundsetup{scale=0.5,opacity=0.3,angle=0,hshift=10.0cm,vshift=-28.0cm,
    contents={\includegraphics[height=\paperheight]{Images/border.png}}}
    \BgThispage
}

\def\jamdanibg{\backgroundsetup{scale=1,opacity=0.3,angle=0,hshift=-10.5cm,
    contents={\includegraphics[height=\paperheight]{Images/jamdani_pattern_bw.png}}}
    \BgThispage
}

\RequirePackage{multicol}
\RequirePackage{xspace}
\RequirePackage[]{xcolor}
\RequirePackage{tcolorbox}

\definecolor{GUBBlue}{RGB}{0,27,84}   
\definecolor{GUBRed}{RGB}{186,0.23,49} 
\definecolor{GUBGreen}{RGB}{53,104,89}
\definecolor{GUBPurple}{RGB}{139, 0, 139}
\definecolor{YellowOrange}{rgb}{1.0, 0.22, 0.0}

\RequirePackage{tikz}
\usetikzlibrary{arrows}
\usetikzlibrary{shapes.geometric}
\RequirePackage{listings}
\usepackage{newverbs}
\newverbcommand{\cverb}{\color{blue}}{}
\RequirePackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    citecolor=GUBRed,
    urlcolor=GUBBlue,
    linktoc=all
}

\tcbset{colback=GUBBlue!10,colframe=black, boxrule=0pt}

% set the default code style
\lstdefinelanguage{latex} {morekeywords={def,begin,centering,end,xspace,hline,caption,label,textit,@article,@misc,cite,ref,chapter,section,subsection,subsubsection,include,toprule,midrule,bottomrule},morecomment=[l]{\%},}

% Define JavaScript language for listings
\lstdefinelanguage{JavaScript}{
  keywords={break, case, catch, continue, debugger, default, delete, do, else, finally, for, function, if, in, instanceof, new, return, switch, this, throw, try, typeof, var, void, while, with, let, const, class, export, extends, import, super, true, false, null, undefined},
  morecomment=[l]{//},
  morecomment=[s]{/*}{*/},
  morestring=[b]',
  morestring=[b]",
  sensitive=true
}

\lstset{
    frame=single, % draw a frame at the top and bottom of the code block
    backgroundcolor=\color{GUBBlue!10}, 
    tabsize=4, % tab space width
    showstringspaces=false, % don't mark spaces in strings
    numbers=left, % display line numbers on the left
    commentstyle=\color{GUBRed},
    stringstyle=\color{GUBGreen},
    breaklines=true, % enable automatic line breaking
    breakatwhitespace=true, % break at whitespace
    postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space}, % continuation arrow
    emph={tabular,table,equation,figure,includegraphics,width,textwidth,title,author,journal,volume,pages,year,editor,url,howpublished,publisher},
    emphstyle={\color{YellowOrange}},
    keywordstyle=\color{blue},
    extendedchars=true,
}

% Configure listings font based on compiler
\ifxetexorluatex
  % XeLaTeX: Use Bangla-capable font for code listings
  \lstset{basicstyle=\footnotesize\bengalifont}
\else
  % pdfLaTeX: Use standard monospace
  \lstset{basicstyle=\footnotesize\ttfamily}
\fi

\setlength{\topmargin}{0.0in}
\setlength{\oddsidemargin}{0.33in}
\setlength{\evensidemargin}{-0.08in}
\setlength{\textheight}{8.5in}
\setlength{\textwidth}{6.0in}


%-----------------------------------------------------------------
\newcommand{\frontmatter}[1]{%
  \ifthenelse{\equal{#1}{1}}
    {\include{./FrontMatter/titlePage}
    \include{./FrontMatter/copyright}
    \include{./FrontMatter/declaration}
    \include{./FrontMatter/endorsement}
    \include{./FrontMatter/certificate}
    \include{./FrontMatter/acknowledgements}
    \include{./FrontMatter/dedication}
    \include{./abstract}}
    {\ifthenelse{\equal{#1}{2}}
      {\include{./FrontMatter/titlePage2}
      \include{./FrontMatter/copyright2}
      \include{./FrontMatter/declaration2}
      \include{./FrontMatter/endorsement2}
      \include{./FrontMatter/certificate2}
      \include{./FrontMatter/acknowledgements2}
      \include{./FrontMatter/dedication2}
      \include{./abstract}}
      {\include{./FrontMatter/titlePage3}
      \include{./FrontMatter/copyright3}
      \include{./FrontMatter/declaration3}
      \include{./FrontMatter/endorsement3}
      \include{./FrontMatter/certificate3}
      \include{./FrontMatter/acknowledgements3}
      \include{./FrontMatter/dedication3}
      \include{./abstract}}
    }
  }

\newcommand{\coverpage}[1]{%
  \ifthenelse{\equal{#1}{1}} {
	\include{./CoverPage/cover}}
	{\ifthenelse{\equal{#1}{2}} 
	  {\include{./CoverPage/cover2}}
	  {\include{./CoverPage/cover3}}
	}
  }
\newcommand{\hsp}{\hspace{20pt}}
\titleformat{\chapter}[hang]{\Huge\bfseries\color{GUBGreen}}{\thechapter.\hsp{\includegraphics[scale=0.2]{Images/jd.png}}\hsp}{0pt}{\Huge\bfseries\color{GUBGreen}}
\titleformat*{\section}{\Large\bfseries\color{GUBGreen}}
\titleformat*{\subsection}{\large\bfseries\color{black!60}}
\titleformat*{\subsubsection}{\bfseries\color{black!50}}
\renewcommand\bibname{Reference}
%-----------------------------------------------------------------
\def\Department{Computer Science and Engineering\xspace}
\def\University{Green University of Bangladesh\xspace}
\def\Degree{Bachelor of Science in Computer Science and Engineering\xspace}

/// Stores grammar rules and their metadata
model grammar_rules {
  /// Unique identifier for the grammar rule
  id          Int     @id @default(autoincrement())
  /// Type of grammar rule (e.g., "spelling", "punctuation", etc.)
  type        String?
  /// Detailed description of the grammar rule
  description String?

  // Relations
  /// Associated grammar rule instances
  rules rules[]

  @@schema("public")
}

/// Contains specific rule instances and their correction suggestions
model rules {
  /// Unique identifier for the rule
  id                Int     @id @default(autoincrement())
  /// The word or phrase to check for
  keyword           String?
  /// The suggested replacement for the keyword
  replace_keyword   String?
  /// Description of the error this rule catches
  error_description String?
  /// Foreign key reference to grammar_rules
  grammar_rule_id   Int?

  // Relations
  /// Reference to the parent grammar rule
  grammar_rule grammar_rules? @relation(fields: [grammar_rule_id], references: [id])

  @@schema("public")
}

/// Stores complete sentences for language processing
model sentences {
  /// Unique identifier for the sentence
  id         Int       @id @default(autoincrement())
  /// The actual text content of the sentence
  text       String?
  /// Timestamp when the sentence was created
  created_at DateTime?

  /// Foreign key reference to datasources
  datasource_id Int?

  // Relations
  /// Reference to the datasource
  datasource datasources? @relation(fields: [datasource_id], references: [id])

  @@schema("warehouse")
}

model sentence_words {
  sentence_id Int
  word_id     Int
  position    Int

  @@id([sentence_id, word_id])
  @@schema("warehouse")
}

/// Contains individual words and their positions within sentences
model words {
  /// Unique identifier for the word
  id Int @id @default(autoincrement())

  /// The actual word text
  value String @unique

  // Relations
  /// Groups where this word appears as the previous word
  prev_pairs word_pairs[] @relation("prev_word")
  /// pairs where this word appears as the next word
  next_pairs word_pairs[] @relation("next_word")
  word_roots_word word_roots[] @relation("word")
  word_roots_root word_roots[] @relation("root")

  @@schema("public")
}

/// Word with their root words
model word_roots {
  word_id Int
  root_id Int

  // Relations
  word words @relation("word", fields: [word_id], references: [id])
  root words @relation("root", fields: [root_id], references: [id])

  @@id([word_id, root_id])
  @@schema("public")
}

/// Represents pairs of words and their statistical relationships
model word_pairs {
  /// Foreign key reference to the previous word
  prev_id Int
  /// Foreign key reference to the next word
  next_id Int
  /// Weight/probability score for this word pair
  weight  Float @default(0)

  // occurance count
  occurance Int @default(0)

  // Relations
  /// Reference to the previous word in the pair
  prev_word words @relation("prev_word", fields: [prev_id], references: [id])
  /// Reference to the next word in the pair
  next_word words @relation("next_word", fields: [next_id], references: [id])

  @@id([prev_id, next_id])
  @@schema("public")
}

/// Part-of-Speech (POS) tags based on Universal Dependencies (UD) v2 specification
/// Source: https://universaldependencies.org/u/pos/
enum pos_tag {
  /// Adjectives are words that typically modify nouns
  /// Example: big, old, green (বড়/boro, পুরানো/purano, সবুজ/sobuj)
  ADJ
  /// Adpositions are prepositions and postpositions
  /// Example: in, to, during (মধ্যে/moddhe, থেকে/theke, জন্য/jonno)
  ADP
  /// Adverbs are words that typically modify verbs, adjectives or other adverbs
  /// Example: very, well, exactly (খুব/khub, ভালোভাবে/bhalobhabe, ঠিক/thik)
  ADV
  /// Auxiliary verbs are used to form tenses, moods, etc.
  /// Example: is, have, will (আছে/ache, হবে/hobe)
  AUX
  /// Coordinating conjunctions connect words, phrases, clauses of equal status
  /// Example: and, or, but (এবং/ebong, বা/ba, কিন্তু/kintu)
  CCONJ
  /// Determiners are words that modify nouns or noun phrases
  /// Example: the, a, this (টি/ti, টা/ta, এই/ei)
  DET
  /// Interjections are exclamatory words
  /// Example: oh, wow, hey (ওহ/oh, বাহ/bah, এই/ei)
  INTJ
  /// Nouns are words denoting all physical objects and materials
  /// Example: cat, rock, intelligence (বিড়াল/biral, পাথর/pathor, বুদ্ধি/buddhi)
  NOUN
  /// Numerals represent numbers, quantities, etc.
  /// Example: one, first, 1 (এক/ek, প্রথম/prothom, ১/1)
  NUM
  /// Particles are function words that must be associated with another word
  /// Example: not, to (না/na, তো/to)
  PART
  /// Pronouns substitute for nouns or noun phrases
  /// Example: I, you, he, she (আমি/ami, তুমি/tumi, সে/se)
  PRON
  /// Proper nouns are names of specific persons, places, organizations
  /// Example: John, Dhaka, Google (জন/john, ঢাকা/dhaka, গুগল/google)
  PROPN
  /// Punctuation marks
  /// Example: ., ?, !, , (।, ?, !, ,)
  PUNCT
  /// Subordinating conjunctions link dependent clauses to independent ones
  /// Example: if, because, while (যদি/jodi, কারণ/karon, যখন/jokhon)
  SCONJ
  /// Symbols represent currency, math operators, etc.
  /// Example: $, +, = (৳, +, =)
  SYM
  /// Verbs denote actions and processes
  /// Example: run, eat, think (দৌড়ানো/dourano, খাওয়া/khawa, ভাবা/bhaba)
  VERB
  /// Other words that don't fit into above categories
  /// Example: foreign words, abbreviations (etc/ইত্যাদি/ittyadi)
  X

  @@schema("public")
}

/// Named Entity Recognition (NER) tags based on CoNLL-2003 shared task specification
/// Source: https://www.clips.uantwerpen.be/conll2003/ner/
enum ner_tag {
  /// Names of persons (e.g., "John Smith", "আব্দুল করিম")
  PERSON
  /// Names of organizations (e.g., "United Nations", "বাংলাদেশ সরকার") 
  ORGANIZATION
  /// Names of locations/geo-political entities (e.g., "Paris", "ঢাকা")
  LOCATION
  /// Temporal expressions - dates (e.g., "June 1st, 2024", "১লা বৈশাখ")
  DATE
  /// Temporal expressions - times (e.g., "3:30 PM", "সকাল ৯টা")
  TIME
  /// Monetary values and quantities (e.g., "$100", "১০০ টাকা")
  MONEY
  /// Percentages and other numerical quantities (e.g., "50%", "১০ কেজি") 
  QUANTITY
  /// Names of products and services (e.g., "iPhone", "পদ্মা সেতু")
  PRODUCT
  /// Names of events (e.g., "World War II", "মুক্তিযুদ্ধ")
  EVENT
  /// Works of art, books, songs etc. (e.g., "Hamlet", "পথের পাঁচালী")
  WORK_OF_ART
  /// Laws, regulations, official documents (e.g., "Constitution", "সংবিধান")
  LAW
  /// Languages and nationalities (e.g., "English", "বাঙালি")
  LANGUAGE

  @@schema("public")
}
